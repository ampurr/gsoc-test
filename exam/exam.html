<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.361">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>animint2 GSOC Examination</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="exam_files/libs/clipboard/clipboard.min.js"></script>
<script src="exam_files/libs/quarto-html/quarto.js"></script>
<script src="exam_files/libs/quarto-html/popper.min.js"></script>
<script src="exam_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="exam_files/libs/quarto-html/anchor.min.js"></script>
<link href="exam_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="exam_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="exam_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="exam_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="exam_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

<script src="exam_files/libs/kePrint-0.0.1/kePrint.js"></script>
<link href="exam_files/libs/lightable-0.0.1/lightable.css" rel="stylesheet">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../changes.css">
</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Contents:</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#easy-test-personalities-by-country" id="toc-easy-test-personalities-by-country" class="nav-link" data-scroll-target="#easy-test-personalities-by-country">Easy Test: Personalities By Country</a>
  <ul class="collapse">
  <li><a href="#data-wrangling" id="toc-data-wrangling" class="nav-link" data-scroll-target="#data-wrangling">Data Wrangling</a></li>
  <li><a href="#big-five-data-viz" id="toc-big-five-data-viz" class="nav-link" data-scroll-target="#big-five-data-viz">Big Five Data Viz</a></li>
  <li><a href="#interacting-with-personality" id="toc-interacting-with-personality" class="nav-link" data-scroll-target="#interacting-with-personality">Interacting with Personality</a></li>
  <li><a href="#sibling-rivalry" id="toc-sibling-rivalry" class="nav-link" data-scroll-target="#sibling-rivalry">Sibling Rivalry</a></li>
  </ul></li>
  <li><a href="#medium-test-the-law-of-large-numbers" id="toc-medium-test-the-law-of-large-numbers" class="nav-link" data-scroll-target="#medium-test-the-law-of-large-numbers">Medium Test: The Law of Large Numbers</a>
  <ul class="collapse">
  <li><a href="#about-the-lln" id="toc-about-the-lln" class="nav-link" data-scroll-target="#about-the-lln">About the LLN</a></li>
  <li><a href="#function-construction" id="toc-function-construction" class="nav-link" data-scroll-target="#function-construction">Function Construction</a></li>
  <li><a href="#fn_lln-in-action" id="toc-fn_lln-in-action" class="nav-link" data-scroll-target="#fn_lln-in-action"><code>fn_lln</code> in Action</a></li>
  <li><a href="#differences-between-fn_lln-and-lln.ani" id="toc-differences-between-fn_lln-and-lln.ani" class="nav-link" data-scroll-target="#differences-between-fn_lln-and-lln.ani">Differences between <code>fn_lln</code> and <code>lln.ani</code></a></li>
  </ul></li>
  <li><a href="#appendix-observations" id="toc-appendix-observations" class="nav-link" data-scroll-target="#appendix-observations">Appendix: Observations</a>
  <ul class="collapse">
  <li><a href="#thoughts" id="toc-thoughts" class="nav-link" data-scroll-target="#thoughts">Thoughts</a></li>
  <li><a href="#possible-bugs" id="toc-possible-bugs" class="nav-link" data-scroll-target="#possible-bugs">Possible Bugs?</a></li>
  <li><a href="#possible-ways-to-get-around-problems" id="toc-possible-ways-to-get-around-problems" class="nav-link" data-scroll-target="#possible-ways-to-get-around-problems">Possible Ways to Get Around Problems</a></li>
  </ul></li>
  <li><a href="#appendix-my-mistakes" id="toc-appendix-my-mistakes" class="nav-link" data-scroll-target="#appendix-my-mistakes">Appendix: My Mistakes</a>
  <ul class="collapse">
  <li><a href="#easy-test" id="toc-easy-test" class="nav-link" data-scroll-target="#easy-test">Easy Test</a></li>
  <li><a href="#medium-test" id="toc-medium-test" class="nav-link" data-scroll-target="#medium-test">Medium Test</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
</div>
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">animint2 GSOC Examination</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="introduction" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Hello! If you’re reading this, you’re probably Toby Dylan Hocking, Faizan Khan, or someone who’s applying to GSOC 2023. (And if you’re in the latter group, best of luck!)</p>
<div class="page-columns page-full"><p>Why am I applying to work on <code>animint2</code>? In my field of expertise—network psychometrics—an <a href="https://ccl.northwestern.edu/netlogo/models/community/Vulnerability_To_Depression">interactive model of depression</a> led to the discovery of hysteresis in symptom networks. Later on, this became a crucial component of network theory.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> So I’ve become an enthusiast for interactive models and visualizations in science.</p><div class="no-row-height column-margin column-container"><li id="fn1"><p><sup>1</sup>&nbsp;D. Borsboom. <a href="https://onlinelibrary.wiley.com/doi/full/10.1002/wps.20375">A network theory of mental disorders</a>. <em>World Psychiatry</em>. 2017.</p></li></div></div>
<div class="page-columns page-full"><p>If I’m lucky, I hope to spend my summer improving <code>animint2</code>. I’m especially interested in writing and editing documentation. But I’m comfortable doing whatever has priority. </p><div class="no-row-height column-margin column-container"><span class="">Of course, my super top secret reason for doing this is so I can maybe eventually publish a paper with Toby and bump my Erdős number down to a 4. But shhhh. That’s just between you and me.</span></div></div>
<p><a href="https://github.com/ampurr/gsoc">Here’s my repository</a>. It has my <code>.qmd</code> file, if you’d prefer to look at that or knit it yourself. Unless you also use the accompanying CSS file, there may be slight aesthetic differences between your rendered HTML file and this website.</p>
<p>Lastly, there’s been an explosion of AI tools this year. I hereby certify that I haven’t used them for any of my writing or code. In fact, I haven’t used them at all.</p>
<p>All right. Onto the tests.</p>
</section>
<section id="easy-test-personalities-by-country" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="easy-test-personalities-by-country">Easy Test: Personalities By Country</h2>
<p>The easy test asks us to do an exercise from the <a href="https://rcdata.nau.edu/genomic-ml/animint2-manual/Ch00-preface.html"><code>animint2</code> Manual</a>. Or,</p>
<blockquote class="blockquote">
<p>Even better: use animint2 to visualize some data from your domain of expertise.</p>
</blockquote>
<p>So let’s take a look at some psychometrics.</p>
<section id="data-wrangling" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="data-wrangling">Data Wrangling</h3>
<div class="page-columns page-full"><p>Many psychological datasets have strict rules regarding their use. Luckily, The Open-Source Psychometrics Project has graced us with <a href="https://openpsychometrics.org/_rawdata/">an abundance of personality data</a>. I’ve elected to use the Big Five dataset.  The dataset has data on participants’ age, race, and gender (among other things). But for the purposes of this test, I’ll limit myself to item responses by country and drop the other data:</p><div class="no-row-height column-margin column-container"><span class="">The Big Five is otherwise known as the five-factor model of personality.</span></div></div>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>b5 <span class="ot">&lt;-</span> <span class="fu">read_tsv</span>(<span class="st">"b5.tsv"</span>,</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>               <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>go_away <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"race"</span>, <span class="st">"age"</span>, <span class="st">"engnat"</span>, <span class="st">"gender"</span>, <span class="st">"hand"</span>, <span class="st">"source"</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>b5c <span class="ot">&lt;-</span> b5 <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="sc">-</span><span class="fu">any_of</span>(go_away))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="page-columns page-full"><p>How many countries are there in this dataset, anyway? And what about the number of responses per country? </p><div class="no-row-height column-margin column-container"><span class=""><code>"(nu"</code> is equivalent to <code>NA</code>.</span></div></div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>num_country <span class="ot">&lt;-</span> b5c <span class="sc">|&gt;</span> <span class="fu">count</span>(country, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>(country <span class="sc">==</span> <span class="st">"(nu"</span>))</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>num_country</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 157 × 2
   country     n
   &lt;chr&gt;   &lt;int&gt;
 1 US       8753
 2 GB       1531
 3 IN       1463
 4 AU        974
 5 CA        924
 6 PH        649
 7 IT        277
 8 MY        247
 9 PK        222
10 DE        191
# … with 147 more rows</code></pre>
</div>
</div>
<p>That’s a lot of countries, and most of them have very few responses. Generalizability is affected if <em>n</em> is too small, so I’m going to somewhat arbitrarily keep the six countries with the largest sample sizes and drop the rest. Sorry, Italy.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>six_countries <span class="ot">&lt;-</span> b5c <span class="sc">|&gt;</span> <span class="fu">filter</span>(country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"US"</span>, <span class="st">"GB"</span>, <span class="st">"IN"</span>, <span class="st">"AU"</span>, <span class="st">"CA"</span>, <span class="st">"PH"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="page-columns page-full"><p>Lastly, the individual item responses aren’t especially useful to me.  So I’m going to generate sumscores for each of the five personality factors and use that instead for the interactive visualization.</p><div class="no-row-height column-margin column-container"><span class="">Individual items are useful for estimating psychometric networks. But as far as I can tell, <code>animint2</code> doesn’t support them.</span></div></div>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># add id column</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>plus_id <span class="ot">&lt;-</span> <span class="fu">rowid_to_column</span>(six_countries, <span class="st">"id"</span>) <span class="sc">|&gt;</span> <span class="fu">rowwise</span>(id)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># generate columns of sumscores</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>plus_sumscores <span class="ot">&lt;-</span> plus_id <span class="sc">|&gt;</span> </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">extraversion =</span> <span class="fu">sum</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">"E"</span>))),</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">neuroticism =</span> <span class="fu">sum</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">"N"</span>))),</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">agreeableness =</span> <span class="fu">sum</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">"A"</span>))),</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">conscientiousness =</span> <span class="fu">sum</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">"C"</span>, <span class="at">ignore.case =</span> <span class="cn">FALSE</span>))),</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">openness =</span> <span class="fu">sum</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">"O"</span>))))</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="co"># remove individual items</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>sumscores <span class="ot">&lt;-</span> plus_sumscores <span class="sc">|&gt;</span> <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, country, extraversion<span class="sc">:</span>openness)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>And now we have our final dataset:</p>
<div class="cell column-body-outset-right">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>sumscores</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 14,294 × 7
      id country extraversion neuroticism agreeableness conscientiousn…¹ openn…²
   &lt;int&gt; &lt;chr&gt;          &lt;dbl&gt;       &lt;dbl&gt;         &lt;dbl&gt;            &lt;dbl&gt;   &lt;dbl&gt;
 1     1 US                32          19            32               31      31
 2     2 US                28          29            31               28      26
 3     3 US                26          32            40               26      22
 4     4 US                28          32            34               37      35
 5     5 US                32          25            37               30      29
 6     6 IN                35          19            31               30      30
 7     7 US                31          37            33               35      37
 8     8 US                29          33            27               32      33
 9     9 IN                32          28            37               34      34
10    10 US                30          29            32               33      31
# … with 14,284 more rows, and abbreviated variable names ¹​conscientiousness,
#   ²​openness</code></pre>
</div>
</div>
</section>
<section id="big-five-data-viz" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="big-five-data-viz">Big Five Data Viz</h3>
<p>Now that our data are cleaned, let’s explore.</p>
<div class="cell page-columns page-full">

<div class="no-row-height column-margin column-container"><div class="cell-output-display">
<table class="lightable-paper table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Code</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Country</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">AU</td>
<td style="text-align: left;">Australia</td>
</tr>
<tr class="even">
<td style="text-align: left;">CA</td>
<td style="text-align: left;">Canada</td>
</tr>
<tr class="odd">
<td style="text-align: left;">GB</td>
<td style="text-align: left;">United Kingdom</td>
</tr>
<tr class="even">
<td style="text-align: left;">IN</td>
<td style="text-align: left;">India</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PH</td>
<td style="text-align: left;">Philippines</td>
</tr>
<tr class="even">
<td style="text-align: left;">US</td>
<td style="text-align: left;">United States</td>
</tr>
</tbody>
</table>


</div></div></div>
<p>We have five personality traits and six countries. How do personality traits vary by country?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># limit redundancy</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>violinize <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fu">geom_violin</span>(</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">draw_quantiles =</span> <span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>)), </span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>(),</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>oc <span class="ot">&lt;-</span> sumscores <span class="sc">|&gt;</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> country, </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> openness))</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>oc <span class="sc">+</span> violinize</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

<div class="no-row-height column-margin column-container"><div class="cell-output-display">
<p><img src="exam_files/figure-html/oc-1.png" class="img-fluid" width="672"></p>
</div></div></div>
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>cc <span class="ot">&lt;-</span> sumscores <span class="sc">|&gt;</span> </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> country, </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> conscientiousness))</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>cc <span class="sc">+</span> violinize</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

<div class="no-row-height column-margin column-container"><div class="cell-output-display">
<p><img src="exam_files/figure-html/cc-1.png" class="img-fluid" width="672"></p>
</div></div></div>
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>ec <span class="ot">&lt;-</span> sumscores <span class="sc">|&gt;</span> </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> country, </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> extraversion))</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>ec <span class="sc">+</span> violinize</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

<div class="no-row-height column-margin column-container"><div class="cell-output-display">
<p><img src="exam_files/figure-html/ec-1.png" class="img-fluid" width="672"></p>
</div></div></div>
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>ac <span class="ot">&lt;-</span> sumscores <span class="sc">|&gt;</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> country, </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> agreeableness))</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>ac <span class="sc">+</span> violinize</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

<div class="no-row-height column-margin column-container"><div class="cell-output-display">
<p><img src="exam_files/figure-html/ac-1.png" class="img-fluid" width="672"></p>
</div></div></div>
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>nc <span class="ot">&lt;-</span> sumscores <span class="sc">|&gt;</span> </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> country, </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> neuroticism))</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>nc <span class="sc">+</span> violinize</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

<div class="no-row-height column-margin column-container"><div class="cell-output-display">
<p><img src="exam_files/figure-html/nc-1.png" class="img-fluid" width="672"></p>
</div></div></div>
<p>There’s some limited differences between personality factors. The distribution of scores for neuroticism is unusually wide, and openness seems to be slightly higher than the other personality factors. I’m not sure why. Maybe it’s an artifact of the kinds of people attracted to the website. Personality science isn’t my specialty in psychology—I can only speculate.</p>
<p>It’s also impressive how similar the scores are between countries. Their median scores do not seriously differ.</p>
<div class="page-columns page-full"><p>Here’s another look at at the similarities between test scores: a density plot for agreeableness. In this plot, we can see the literal overlap between the distribution of test scores.  I’ll come back to the inter-country overlap later.</p><div class="no-row-height column-margin column-container"><span class="">Agreeableness refers to phenomena like the tendency for compliance and altruism.</span></div></div>
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>a_density <span class="ot">&lt;-</span> sumscores <span class="sc">|&gt;</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> agreeableness,</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">color =</span> country,</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">fill =</span> country)) <span class="sc">+</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.1</span>)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>a_density</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

<div class="no-row-height column-margin column-container"><div class="cell-output-display">
<p><img src="exam_files/figure-html/density-plot-1.png" class="img-fluid" width="672"></p>
</div></div></div>
</section>
<section id="interacting-with-personality" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="interacting-with-personality">Interacting with Personality</h3>
<p>All right. Time for the most relevant part of the test: using <code>animint()</code> to showcase my data.</p>
<div class="page-columns page-full"><p>The factors in the five-factor model of personality are meant to be mostly independent from one another.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> That partly means we don’t expect the factors, when plotted against one another, to have any particularly strong relationships. In contrast, if we obtain a Pearson’s <em>r</em> close to 1 or −1, it may be the case that the two factors are actually one.</p><div class="no-row-height column-margin column-container"><li id="fn2"><p><sup>2</sup>&nbsp;There are empirical and theoretical reasons to question this, but that’s outside the scope of the test. For further reading, see:</p>
<ul>
<li>D. Borsboom. <a href="https://link.springer.com/10.1007/s11336-006-1447-6">The attack of the psychometricians</a>. <em>Psychometrika.</em> 2006.</li>
<li>D. van der Linden et al.&nbsp;<a href="doi.org/10.1016/j.jrp.2010.03.003">The general factor of personality</a>. <em>J. Res. Pers.</em> 2010. <!-- /footnote --></li>
</ul>
</li></div></div>
<!-- footnote -->
<p>What do the data show?</p>
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>correlations <span class="ot">&lt;-</span> sumscores <span class="sc">|&gt;</span> </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> conscientiousness,</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> extraversion,</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">color =</span> country))</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>corr <span class="ot">&lt;-</span> correlations <span class="sc">+</span> <span class="fu">geom_jitter</span>(<span class="at">alpha =</span> <span class="fl">0.25</span>)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>ani_corr <span class="ot">&lt;-</span> <span class="fu">animint</span>(corr)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>ani_corr<span class="sc">$</span>first <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">country =</span> <span class="st">"US"</span>)</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>ani_corr</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>mapping: x = conscientiousness, y = extraversion, colour = country, showSelectedlegendcolour = country 
geom_point: na.rm = FALSE
stat_identity: na.rm = FALSE
position_jitter </code></pre>
</div>
<div id="fig-personality-us" class="quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="figure page-columns page-full">
<script type="text/javascript" src="figpersonalityus/vendor/d3.v3.js"></script>
<script type="text/javascript" src="figpersonalityus/animint.js"></script>
<script type="text/javascript" src="figpersonalityus/vendor/jquery-1.11.3.min.js"></script>
<script type="text/javascript" src="figpersonalityus/vendor/selectize.min.js"></script>
<link rel="stylesheet" type="text/css" href="figpersonalityus/vendor/selectize.css">
<p>
</p>
<div id="figpersonalityus">

</div>
<script>var figpersonalityus = new animint("#figpersonalityus", "figpersonalityus/plot.json");</script>
<figcaption class="figure-caption margin-caption">Figure&nbsp;1: The US’s data seriously overlap with other countries’.</figcaption>
</figure>
</div>
</div>
<div class="page-columns page-full"><p>Here, extraversion is plotted against conscientiousness.  The United States is the only country currently plotted. Clicking on other countries plots their data and shows that aforementioned overlap between countries. I’ve also made the data points semi-transparent so the data density is visible.</p><div class="no-row-height column-margin column-container"><span class="">Extraversion refers to phenomena like outgoingness, while conscientiousness refers to phenomena like diligence.</span></div></div>
<p>I haven’t bothered to do any statistics. But at first glance, it seems like these data are consistent with the five-factor model. Outliers distort our hypothetical regression line and render <span class="math inline">\(r &gt; 0\)</span>, but if we zoom in where the data are most dense, perhaps even that fluke of a pattern will fade.</p>
<p>Let’s see if that’s true.</p>
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>corr_densed <span class="ot">&lt;-</span> corr <span class="sc">+</span> </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="dv">20</span>, <span class="dv">40</span>) <span class="sc">+</span> </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">20</span>, <span class="dv">40</span>)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>ani_corr_zoom <span class="ot">&lt;-</span> <span class="fu">animint</span>(corr_densed)</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>ani_corr_zoom<span class="sc">$</span>first <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">country =</span> <span class="st">"PH"</span>)</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>ani_corr_zoom</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>mapping: x = conscientiousness, y = extraversion, colour = country, showSelectedlegendcolour = country 
geom_point: na.rm = FALSE
stat_identity: na.rm = FALSE
position_jitter </code></pre>
</div>
<div id="fig-personality-ph" class="quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="figure page-columns page-full">
<p>
</p>
<div id="figpersonalityph">

</div>
<script>var figpersonalityph = new animint("#figpersonalityph", "figpersonalityph/plot.json");</script>
<figcaption class="figure-caption margin-caption">Figure&nbsp;2: There seems to be no relationship between the two factors.</figcaption>
</figure>
</div>
</div>
<p>This time I’ve opted to show the Philippines, the country with the sparsest data. The data do seem to be pretty patternless. Furthermore, as you add more countries—or just the United States—the discrete nature of the data becomes visible even with jittered points. (The sumscores can only be integers.)</p>
<div class="page-columns page-full"><p>Of course, it’s immediately obvious without jitter. In the following heatmap, we can see both the discreteness and distribution of the data.  However, generating the heatmap is not as straightforward as generating a scatterplot. First, we need to generate all combinations between the extraversion and conscientiousness factors. Then we need to count them:</p><div class="no-row-height column-margin column-container"><span class="">Thanks to Toby Dylan Hocking for the suggestion to use a heatmap here!</span></div></div>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>combo_tbl <span class="ot">&lt;-</span> sumscores <span class="sc">|&gt;</span> </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(extraversion, conscientiousness) <span class="sc">|&gt;</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expand_grid</span>(<span class="at">.name_repair =</span> <span class="st">"minimal"</span>)</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>von_count <span class="ot">&lt;-</span> combo_tbl <span class="sc">|&gt;</span> </span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="fu">across</span>(extraversion<span class="sc">:</span>conscientiousness)) <span class="sc">|&gt;</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Finally, we can generate our heatmap:</p>
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>corr_discrete <span class="ot">&lt;-</span> von_count <span class="sc">|&gt;</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> conscientiousness,</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> extraversion,</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">fill =</span> n)) <span class="sc">+</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>() <span class="sc">+</span> <span class="fu">coord_fixed</span>()</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>corr_discrete</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display page-columns page-full">
<div id="fig-personality-discrete" class="quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="exam_files/figure-html/fig-personality-discrete-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption margin-caption">Figure&nbsp;3: Discreteness and density of the Big Five data.</figcaption>
</figure>
</div>
</div>
</div>
<p>Pretty cool! Being able to explore and present this kind of research would be harder without the interactive benefits of <code>animint2</code>.</p>
</section>
<section id="sibling-rivalry" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="sibling-rivalry">Sibling Rivalry</h3>
<p>The second part of the easy test asks me to</p>
<blockquote class="blockquote">
<p>Show an example of an error that you see when animint2 is loaded/attached at the same time as standard ggplot2.</p>
</blockquote>
<p>There’s no conflict with just loading the packages:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(animint2)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>But R throws up an error message when you run code that uses syntax common to both. As a quick example, I’ll load up a toy dataset and try to generate a bar chart.</p>
<div class="cell">

</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>cat_pop <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"meow.csv"</span>,</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>cat_bar <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> cat_pop, </span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">mapping =</span> <span class="fu">aes</span>(cat_name, popularity)) <span class="sc">+</span> </span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">color =</span> purple)</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>cat_bar</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>What happens?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>Warning<span class="sc">:</span> Incompatible <span class="fu">methods</span> (<span class="st">"+.gganimint"</span>, <span class="st">"+.gg"</span>) <span class="cf">for</span> <span class="st">"+"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In other words, <code>animint2</code> and <code>ggplot2</code> don’t get along because their syntaxes overlap. Unloading or uninstalling one or the other gets rid of the problem and finally gives us our very important kitty bar chart.</p>
<div class="cell page-columns page-full">
<div class="cell-output-display page-columns page-full">
<div id="fig-cat-popularity" class="quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="exam_files/figure-html/fig-cat-popularity-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption margin-caption">Figure&nbsp;4: Popularity of cat names on a scale of 1–3.</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="medium-test-the-law-of-large-numbers" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="medium-test-the-law-of-large-numbers">Medium Test: The Law of Large Numbers</h2>
<p>There are multiple medium tests. The first one requires that the test-taker</p>
<blockquote class="blockquote">
<p>translate an example of the animation package into an Animint.</p>
</blockquote>
<p>So let’s look at the law of large numbers (LLN).</p>
<section id="about-the-lln" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="about-the-lln">About the LLN</h3>
<div class="page-columns page-full"><p>The law of large numbers, also called the weak law of large numbers, was named by S. D. Poisson in an article published in 1835.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> He wrote, emphasis his, that</p><div class="no-row-height column-margin column-container"><li id="fn3"><p><sup>3</sup>&nbsp;Translated from French by I.&nbsp;Hacking, in <a href="https://doi.org/10.1017/CBO9780511819766.012">Chapter 12</a> of <em>The Taming of Chance</em>. 1990.</p>
<p>Some sources cite <a href="https://worldcat.org/title/recherches-sur-la-probabilite-des-jugements-en-matiere-criminelle-et-en-matiere-civile-precedees-des-regles-generales-du-calcul-des-probabilites/oclc/669708893">Poisson’s 1837 book</a> as the origin of the LLN’s name. Not quite. In <a href="https://gallica.bnf.fr/ark:/12148/bpt6k29606/f478.item">his 1835 article</a>, he mentions “la loi des grands nombres”—the law of large numbers.</p></li></div></div>
<blockquote class="blockquote">
<p>Things of every kind are subject to a universal law that we may call <em>the law of large numbers</em>. It consists in this: if one observes a very considerable number of events of the same kind, depending on causes that vary irregularly, that is to say, without any systematic variation in one direction, then one finds that the ratios between the numbers of events are very nearly constant.</p>
</blockquote>
<div class="page-columns page-full"><p>Though Poisson named it, the LLN has its origins in a posthumous publication by Jacob Bernoulli over a century earlier, and it has continued developing even up to the twentieth century.<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> The exact details of the law have changed over the centuries. For our purposes, those details are largely irrelevant. (Also, I know my limits—there’s no way I can explain the LLN in a manner satisfactory to a mathematician.) Instead, we’ll be thinking of the LLN like this: given some population mean and some sample mean, the sample mean approaches the population mean as the sample size increases.</p><div class="no-row-height column-margin column-container"><li id="fn4"><p><sup>4</sup>&nbsp;Some histories:</p>
<ul>
<li>M. Denker. <a href="doi.org/10.1090/S0273-0979-2013-01411-3">Tercentennial anniversary of Bernoulli’s law of large numbers</a>. <em>Bull. Am. Math. Soc</em>. 2013.</li>
<li>E. Seneta. <a href="https://doi.org/10.3150/12-BEJSP12">A Tricentenary history of the Law of Large Numbers</a>. <em>Bernoulli</em>. 2013.</li>
</ul>
</li></div></div>
<p>Importantly, that’s how the <a href="https://yihui.org/animation/example/lln-ani/">LLN <code>animation</code> demonstration</a> interprets the LLN as well. I’ll construct my function with this understanding of the LLN in mind.</p>
</section>
<section id="function-construction" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="function-construction">Function Construction</h3>
<p>The <code>lln.ani</code> function <a href="https://github.com/yihui/animation/blob/main/R/lln.ani.R">has useful defaults for all its arguments</a>. That’s a good goal to have—a user should be able to run the LLN function without any arguments and produce something useful to teach with.</p>
<p>Let’s call the <code>animint2</code> LLN function <code>fn_lln</code>. To work, <code>fn_lln</code> requires</p>
<ol type="1">
<li>The ability to read some set of data;</li>
<li>The ability to generate the population mean for that data;</li>
<li>The ability to continuously sample from the aforementioned dataset and generate sample means, as well as a way to make it stop; and</li>
<li>A plot that visually indicates the population mean, updates <em>n</em> as it increases, and graphs out the sample means.</li>
</ol>
<div class="page-columns page-full"><p>Furthermore, though this isn’t necessary for the function to work, I want <code>fn_lln</code> to output messages that are useful for someone who’s unfamiliar with R. I’ll use the <code>assertive</code> package to do this instead of relying on base R’s functions, which sometimes outputs arcane error messages. </p><div class="no-row-height column-margin column-container"><span class="">I could also write my own error messages, but I like <code>assertive</code>’s, and code with my own error messages would be messier.</span></div></div>
<p>The first requirement is straightforward. The dataset needs to take the form of a numeric vector that contains at least one number and no <code>NA</code>s. If a user tries to use something else, <code>fn_lln</code> should throw up an error. I’ll call the vector <code>data_vector</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>validity_check <span class="ot">&lt;-</span> data_vector <span class="sc">|&gt;</span> </span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  assertive<span class="sc">::</span><span class="fu">assert_is_numeric</span>() <span class="sc">|&gt;</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  assertive<span class="sc">::</span><span class="fu">is_non_empty</span>() <span class="sc">|&gt;</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  assertive<span class="sc">::</span><span class="fu">assert_all_are_not_na</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The second requirement is also straightforward. I can just calculate <code>data_vector</code>’s mean—by definition, it’s the population mean.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>population_mean <span class="ot">&lt;-</span> data_vector <span class="sc">|&gt;</span> <span class="fu">mean</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The third requirement is more complicated. I need to allow the user to decide on the sample size, as well as how often <code>data_vector</code> is sampled from. I need to take multiple samples, each one larger than the other, and calculate sample means from them. Then I need to place those calculations into a dataframe to use later on.</p>
<p>The <code>sampling</code> argument lets <code>fn_lln</code> know the maximum sample size, as well as how often <code>data_vector</code> should be sampled. A for loop does the sampling, and then <code>sample_df</code> stores both <em>n</em> and the sample means as a dataframe.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create empty vector to put sample means into</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>sample_means <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">"numeric"</span>,</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">length =</span> sampling)</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="co"># random sampling and mean generation</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>sampling) {</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>  sample_means[i] <span class="ot">&lt;-</span> data_vector <span class="sc">|&gt;</span> </span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sample</span>(<span class="at">size =</span> i, <span class="at">replace =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>()</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a><span class="co"># generate n and a df to use for animint</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>sample_df <span class="ot">&lt;-</span> sample_means <span class="sc">|&gt;</span> </span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data.frame</span>() <span class="sc">|&gt;</span></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>  tibble<span class="sc">::</span><span class="fu">rowid_to_column</span>(<span class="at">var =</span> <span class="st">"n"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The fourth requirement takes our population mean and sample means and constructs an animated plot that showcases the LLN.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># make lln plot</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>lln_plot <span class="ot">&lt;-</span> sample_df <span class="sc">|&gt;</span> </span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> n, <span class="at">y =</span> sample_df<span class="sc">$</span>sample_means) <span class="sc">+</span> </span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> ylab) <span class="sc">+</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">showSelected =</span> <span class="st">"n"</span>, <span class="at">colour =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> population_mean, </span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">colour =</span> <span class="st">"red"</span>)</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a><span class="co"># animate lln plot</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>ani_lln_plot <span class="ot">&lt;-</span> <span class="fu">animint</span>(lln_plot)</span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>ani_lln_plot<span class="sc">$</span>time <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">variable =</span> <span class="st">"n"</span>, <span class="at">ms =</span> <span class="dv">75</span>)</span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>ani_lln_plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>As mentioned, I also want useful defaults for <code>fn_lln</code>. Let’s have <code>data_vector</code> load a pseudo-random sample of six-sided dice rolls by default.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>d6 <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">size =</span> <span class="dv">500</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The final function looks like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>fn_lln <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">data_vector =</span> d6, </span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>                   <span class="at">sampling =</span> <span class="dv">500</span>,</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">ylab =</span> <span class="st">"sample mean"</span>){</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># default data_vector</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>  d6 <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">size =</span> <span class="dv">500</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># make sure dataset is a numeric vector</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>  validity_check <span class="ot">&lt;-</span> data_vector <span class="sc">|&gt;</span> </span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>  assertive<span class="sc">::</span><span class="fu">assert_is_numeric</span>() <span class="sc">|&gt;</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>  assertive<span class="sc">::</span><span class="fu">is_non_empty</span>() <span class="sc">|&gt;</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>  assertive<span class="sc">::</span><span class="fu">assert_all_are_not_na</span>()</span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># calculate population mean</span></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>  population_mean <span class="ot">&lt;-</span> data_vector <span class="sc">|&gt;</span> <span class="fu">mean</span>()</span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># create empty vector to put sample means into</span></span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>  sample_means <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">"numeric"</span>,</span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>                         <span class="at">length =</span> sampling)</span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a>  <span class="co"># random sampling and mean generation</span></span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>sampling) {</span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a>    sample_means[i] <span class="ot">&lt;-</span> data_vector <span class="sc">|&gt;</span> </span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a>      <span class="fu">sample</span>(<span class="at">size =</span> i, <span class="at">replace =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mean</span>()</span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a>  <span class="co"># generate n and a df to use for animint</span></span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a>  sample_df <span class="ot">&lt;-</span> sample_means <span class="sc">|&gt;</span> </span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">data.frame</span>() <span class="sc">|&gt;</span></span>
<span id="cb29-31"><a href="#cb29-31" aria-hidden="true" tabindex="-1"></a>    tibble<span class="sc">::</span><span class="fu">rowid_to_column</span>(<span class="at">var =</span> <span class="st">"n"</span>)</span>
<span id="cb29-32"><a href="#cb29-32" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb29-33"><a href="#cb29-33" aria-hidden="true" tabindex="-1"></a>  <span class="co"># make lln plot</span></span>
<span id="cb29-34"><a href="#cb29-34" aria-hidden="true" tabindex="-1"></a>  lln_plot <span class="ot">&lt;-</span> sample_df <span class="sc">|&gt;</span> </span>
<span id="cb29-35"><a href="#cb29-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb29-36"><a href="#cb29-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> n, <span class="at">y =</span> sample_df<span class="sc">$</span>sample_means) <span class="sc">+</span> </span>
<span id="cb29-37"><a href="#cb29-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">y =</span> ylab) <span class="sc">+</span></span>
<span id="cb29-38"><a href="#cb29-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">showSelected =</span> <span class="st">"n"</span>, <span class="at">colour =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb29-39"><a href="#cb29-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb29-40"><a href="#cb29-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> population_mean, </span>
<span id="cb29-41"><a href="#cb29-41" aria-hidden="true" tabindex="-1"></a>               <span class="at">colour =</span> <span class="st">"red"</span>)</span>
<span id="cb29-42"><a href="#cb29-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-43"><a href="#cb29-43" aria-hidden="true" tabindex="-1"></a>  <span class="co"># animate lln plot</span></span>
<span id="cb29-44"><a href="#cb29-44" aria-hidden="true" tabindex="-1"></a>  ani_lln_plot <span class="ot">&lt;-</span> <span class="fu">animint</span>(lln_plot)</span>
<span id="cb29-45"><a href="#cb29-45" aria-hidden="true" tabindex="-1"></a>  ani_lln_plot<span class="sc">$</span>time <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">variable =</span> <span class="st">"n"</span>, <span class="at">ms =</span> <span class="dv">75</span>)</span>
<span id="cb29-46"><a href="#cb29-46" aria-hidden="true" tabindex="-1"></a>  ani_lln_plot</span>
<span id="cb29-47"><a href="#cb29-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-48"><a href="#cb29-48" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="fn_lln-in-action" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="fn_lln-in-action"><code>fn_lln</code> in Action</h3>
<div class="page-columns page-full"><p>All right. Before we get started: after you’ve finished looking at an animated plot, I recommend hiding the selection menu that corresponds to that plot. Otherwise, if you use Firefox, it’ll be difficult to read the rest of this examination. </p><div class="no-row-height column-margin column-container"><span class="">See the <a href="https://github.com/tdhock/animint2/issues/90">scrolling bug issue</a> for more details.</span></div></div>
<p>First, let’s look at what <code>fn_lln</code> produces by default:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fn_lln</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p></p>
<div id="funllnshowdefault"></div>
<script>var funllnshowdefault = new animint("#funllnshowdefault", "funllnshowdefault/plot.json");</script>
</div>
</div>
<p>The bold red line is the population mean. The grey lines graph the sample means as they converge towards the population mean. The red dot moves when <em>n</em> changes. Pausing the animation lets you change <em>n</em> and move the red dot, allowing you to see how close or far the sample mean is to the population mean at some particular sample size.</p>
<p>Next, we’ll look at what happens when a user uses one argument but not the others. Recall that the three default arguments are <code>data_vector = d6</code>, <code>sampling = 500</code>, and <code>ylab = "sample mean"</code>.</p>
<p>Let’s replace <code>data_vector</code> with a pseudo-random sample of twelve-sided dice rolls:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>d12 <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, <span class="at">size =</span> <span class="dv">250</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="fu">fn_lln</span>(<span class="at">data_vector =</span> d12)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p></p>
<div id="funllnshowdvchange"></div>
<script>var funllnshowdvchange = new animint("#funllnshowdvchange", "funllnshowdvchange/plot.json");</script>
</div>
</div>
<p>Now, let’s replace <code>sampling</code>. We’ll sample <code>d6</code> 250 times instead of the default 500:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fn_lln</span>(<span class="at">sampling =</span> <span class="dv">250</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p></p>
<div id="funllnshowsamplingchange"></div>
<script>var funllnshowsamplingchange = new animint("#funllnshowsamplingchange", "funllnshowsamplingchange/plot.json");</script>
</div>
</div>
<p>We can also just replace the label for the y-axis via <code>ylab</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fn_lln</span>(<span class="at">ylab =</span> <span class="st">"average dice rolls"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p></p>
<div id="funllnshowylabchange"></div>
<script>var funllnshowylabchange = new animint("#funllnshowylabchange", "funllnshowylabchange/plot.json");</script>
</div>
</div>
<div class="page-columns page-full"><p>Finally, let’s take a look at using all three arguments. We’ll use actual empirical data for this: neuroticism sumscores in our previously-used Big Five dataset. And we’ll sample from those sumscores 800 times. </p><div class="no-row-height column-margin column-container"><span class="">Neuroticism refers to phenomena like vulnerability to psychological stress and poor emotional stability.</span></div></div>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fn_lln</span>(<span class="at">data_vector =</span> sumscores<span class="sc">$</span>neuroticism, </span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">sampling =</span> <span class="dv">800</span>,</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">ylab =</span> <span class="st">"neuroticism"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p></p>
<div id="funllnshowallchange"></div>
<script>var funllnshowallchange = new animint("#funllnshowallchange", "funllnshowallchange/plot.json");</script>
</div>
</div>
<p><code>fn_lln</code> seems to work great!</p>
</section>
<section id="differences-between-fn_lln-and-lln.ani" class="level3">
<h3 class="anchored" data-anchor-id="differences-between-fn_lln-and-lln.ani">Differences between <code>fn_lln</code> and <code>lln.ani</code></h3>
<p>There are some obvious differences between <code>fn_lln</code> (our LLN function for <code>animint2</code>) and the <code>lln.ani</code> function in <code>animation</code>.</p>
<p>The most important difference is that the latter builds the plot and draws its data iteratively. Each animation is a series of plots, with each being added on top of the next. Try running <code>animation::lln.ani()</code>. You’ll see that it produces 50 plots and flips through them like a flipbook.</p>
<p>In contrast, <code>fn_lln</code> produces the entire plot and line chart before animating the red dot. It produces one plot and updates it continuously. There’s also a minor interactive element that <code>lln.ani</code> lacks.</p>
<p>This is not to say that <code>fn_lln</code> is worse or better than <code>lln.ani</code>. It’s just that translating <code>animation</code>’s LLN function is similar to translating a natural language—meaning is lost and meaning is gained. Regardless of its fidelity to <code>lln.ani</code>, I hope <code>fn_lln</code> will be of some use to statistics teachers and users.</p>
</section>
</section>
<section id="appendix-observations" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="appendix-observations">Appendix: Observations</h2>
<p>Here are some things that I noticed while reading the documentation and playing around with the package. Since I’m new to <code>animint2</code>, I make no claim that my observations are novel, noteworthy, or even correct. But I think they’re still useful. My guess is that many users of <code>animint2</code> are also “new” to it, in the sense that they’re working scientists whose goal is to generate an interactive graphic and then to stop thinking about the package. Maybe some of my (possibly mistaken) observations overlap with theirs.</p>
<section id="thoughts" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="thoughts">Thoughts</h3>
<div class="page-columns page-full"><p>I know that <code>animint2</code> is a fork of <code>ggplot2</code>, not an extension. But the family resemblance between <code>animint2</code> and <code>ggplot2</code> is sometimes confusing. For a short while, I admit that I treated the former as if it were an extension of the latter. I tried to use <code>geom_col()</code> and then <code>geom_boxplot()</code> before checking the <a href="https://cran.r-project.org/web/packages/animint2/">reference manual</a> and realizing they were not part of <code>animint2</code>. I also foolishly tried to use packages that depend on <code>ggplot2</code>. Since I had <code>animint2</code> loaded instead, that obviously didn’t work. </p><div class="no-row-height column-margin column-container"><span class="">Fun fact: I recently realized that the second edition of the <code>ggplot2</code> book mentions <code>animint</code>.</span></div></div>
<div class="page-columns page-full"><p><a href="https://ggplot2.tidyverse.org/reference/index.html"><code>ggplot2</code> documentation</a> is available as a website, but <a href="https://cran.r-project.org/web/packages/animint2/"><code>animint2</code> documentation</a> is only available as a PDF.  Of course, there’s the valuable <a href="https://rcdata.nau.edu/genomic-ml/animint2-manual/Ch00-preface.html"><code>animint2</code> Manual</a>. But that’s more like a book than a reference site—something like a counterpart to the <a href="https://ggplot2-book.org/"><code>ggplot2</code> book</a>. Since the <code>ggplot2</code> reference was a lot more accessible, I found myself using their reference and only going back to the <code>animint2</code> reference when necessary.</p><div class="no-row-height column-margin column-container"><span class="">Grumpy aside: why are PDFs R’s default documentation format? It’s the same with <span class="math inline">\(\LaTeX\)</span>, but at least there’s an obvious technical reason for that.</span></div></div>
<p>I’m not sure if I’ll have enough time, and I’m not sure it’s what you mean when you wrote that <code>animint2</code> will “have even more… documentation.” But as part of that documentation boost, I’d like to generate a reference site for the unique features of <code>animint2</code>. I think that’d make the package more accessible to <code>animint2</code>’s users.</p>
</section>
<section id="possible-bugs" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="possible-bugs">Possible Bugs?</h3>
<p>Here’s a list of <code>animint2</code>’s unexpected behaviors. My mistaken observations are probably most concentrated here. It’s possible that the unexpected behavior is not the fault of <code>animint2</code>, but instead the fault of another package or user error. Honestly? Probably user error.</p>
<ul>
<li><p><a href="https://rcdata.nau.edu/genomic-ml/animint2-manual/Ch07-limitations.html">Chapter 7</a> of the <code>animint2</code> Manual is buggy and scrolls up by itself.  The effect begins happening around this sentence: “Note how we used <code>geom_segment</code> instead of <code>geom_bar</code>, but their appearance is similar.”</p></li>
<li><p>It’s difficult to lay out multiple plots in a grid, or on a line. Quarto will not knit them properly. My workaround is to have a codeblock for each graph. There’s <a href="https://github.com/tdhock/animint/issues/150">an open issue</a> about it for <code>animint</code>, but not for <code>animint2</code>. So I’m not sure if it’s still a problem, or if I messed up somehow.</p></li>
<li><p>When I tried to make an interactive density plot, I was warned that “<code>showSelected</code> does not work with <code>StatDensity</code>.” Items in the legend are selectable, but selecting one removes the density curve currently on screen. The end result is that only one curve shows at a time. I haven’t been able to find documentation about this anywhere.</p></li>
<li><p>When I make interactive scatterplots, I’m warned that “<code>showSelected</code> only works with <code>position=identity</code>, problem: geom1_point_foobar.” This is confusing, since:</p>
<ul>
<li>It’s already the case that <code>position = identity</code>, since it’s the default for <code>geom_point()</code> and <code>geom_jitter()</code>.</li>
<li>The problem it points out is the <code>.tsv</code> file that <code>animint()</code> generates.</li>
<li>It correctly renders the scatterplot.</li>
<li>It passes <code>testthat::expect_no_warning()</code> and fails <code>expect_warning()</code>, despite the fact that it outputs a warning.</li>
</ul></li>
<li><p>When I make violin plots, I’m warned that the graph is “collapsing to unique ‘x’ values.” This <a href="https://github.com/tidyverse/ggplot2/pull/4654">has been fixed</a> in <code>ggplot2</code> but not in <code>animint2</code>, possibly since the fix happened after the fork. (I’m least certain about this observation.)</p></li>
<li><p>When I try to place a static <code>animint2</code> graph in the margins, I can’t place a caption, or else the graph doesn’t render correctly. <code>column: margin</code> and <code>fig-cap</code> don’t work well together.</p></li>
<li><p>When I try to use <code>geom_bin2d()</code>, I’m informed that “<code>bin2d</code> is not supported in <code>animint</code>. Try using <code>geom_tile()</code> and binning the data yourself.” But the <code>animint2</code> reference mentions that it does support <code>geom_bin2d</code>.</p></li>
<li><p>When I use <code>geom_raster()</code>, <code>animint2</code> correctly renders it as a static graph. But it will not render the data or the legend when I use <code>animint2</code>. This <a href="https://github.com/tdhock/animint2/issues/53">is documented</a>.</p></li>
<li><p>When I use <code>geom_hex</code>, I’m warned that there is “no data in geom1_hex_foobar.”</p></li>
<li><p>It is not possible to plot a normal distribution in <code>animint2</code> without specifying any dataframes or tibbles. However, you can do so in <code>ggplot2</code>. This is not a bug, but I figured it should be noted.</p></li>
</ul>
<div class="no-row-height column-margin column-container"><span class="">Only in Firefox. Technically not about <code>animint2</code> itself, but it’s <code>animint2</code> adjacent.</span></div></section>
<section id="possible-ways-to-get-around-problems" class="level3">
<h3 class="anchored" data-anchor-id="possible-ways-to-get-around-problems">Possible Ways to Get Around Problems</h3>
<ul>
<li>In <code>ggplot2</code>, it’s possible to plot a normal distribution without any specifying any dataframes or tibbles. This is not the case for <code>animint2</code>. The obvious solution is to specify a dataframe or a tibble:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># works only in ggplot2</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>norm_distr <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">xlim</span>(<span class="sc">-</span><span class="dv">5</span>,<span class="dv">5</span>)</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>norm_distr <span class="sc">+</span> <span class="fu">stat_function</span>(<span class="at">fun =</span> dnorm)</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="co"># works in animint2</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>norm_distr <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="fu">data.frame</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">5</span>, <span class="dv">5</span>)), <span class="fu">aes</span>(x)) <span class="sc">+</span> </span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_function</span>(<span class="at">fun =</span> dnorm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>In <a href="https://rcdata.nau.edu/genomic-ml/animint2-manual/Ch07-limitations.html">Chapter 7</a> of the <code>animint2</code> Manual, and for other webpages with animints, the page automatically scrolls up in Firefox. Fixes can be found in the <a href="https://github.com/tdhock/animint2/issues/90">scrolling bug issue</a> in the <code>animint2</code> repository.</li>
</ul>
</section>
</section>
<section id="appendix-my-mistakes" class="level2">
<h2 class="anchored" data-anchor-id="appendix-my-mistakes">Appendix: My Mistakes</h2>
<p>Major mistakes I made while doing these tests and then subsequently caught. This excludes mistakes re: the number of brackets, the placement of a function, or spelling.</p>
<section id="easy-test" class="level3">
<h3 class="anchored" data-anchor-id="easy-test">Easy Test</h3>
<p>My sumscores were erroneous, but it took me an embarrassingly long time to notice and check. I first noticed that the openness sumscores were impossibly high—each sumscore has a ceiling of 50, which openness sumscores exceeded. Manually adding up the scores myself showed that extraversion had errors, too. I believe my mistake was using <code>c_across()</code> and then messing up the selection syntax, but I didn’t really have the time to experiment and check.</p>
<p>I took a long time figuring out the details of the heatmap. The code is straightforward, but that is the result of a long process of experimentation. Most of this was because I was unfamiliar with both heatmaps and the functions necessary for combinatorics (e.g.&nbsp;I was unaware of <code>expand_grid()</code>). It was a good learning experience.</p>
</section>
<section id="medium-test" class="level3">
<h3 class="anchored" data-anchor-id="medium-test">Medium Test</h3>
<p>Here’s what my for loop does. First, it samples a datum and produces the mean, which is just the datum itself. Then it replaces that datum, samples 2 data points (with replacement), and produces a mean. Then it samples 3 data points, then 4, and so on until the function tells it to stop.</p>
<p>My initial for loop didn’t do that. I first noticed that my sample means didn’t seem to be converging as the LLN said it would. Then I noticed a much more obvious problem: <code>d6</code> consists solely of integers, so why was the first mean not an integer as well? Something was clearly wrong.</p>
<p>Eventually, I figured out that <code>sample()</code> was missing its <code>size</code> argument. I set <code>size = i</code> and got the loop to work. Lesson learned: if there’s a bug, check your arguments!</p>
</section>
</section>


</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>